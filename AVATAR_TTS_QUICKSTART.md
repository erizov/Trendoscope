# üé§ Avatar TTS - Quick Start Guide

## –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–î–æ–±–∞–≤–∏—Ç—å –∞–≤–∞—Ç–∞—Ä —Å —Ñ—É–Ω–∫—Ü–∏–µ–π —á—Ç–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º/–∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–∞—Ö –º—É–∂—Å–∫–∏–º –∏–ª–∏ –∂–µ–Ω—Å–∫–∏–º –≥–æ–ª–æ—Å–æ–º.

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (MVP)

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install gtts>=2.5.0 pydub>=0.25.1
```

### –®–∞–≥ 2: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
trendoscope2/src/trendoscope2/
‚îú‚îÄ‚îÄ tts/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ tts_service.py      # –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å
‚îÇ   ‚îî‚îÄ‚îÄ gtts_provider.py    # Google TTS –ø—Ä–æ–≤–∞–π–¥–µ—Ä
```

### –®–∞–≥ 3: –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### 3.1 TTS Service (`tts/tts_service.py`)
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞—É–¥–∏–æ –∏–∑ —Ç–µ–∫—Å—Ç–∞
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞ (ru/en)
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—É–¥–∏–æ —Ñ–∞–π–ª–æ–≤
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è

#### 3.2 API Endpoints (`api/main.py`)
```python
POST /api/tts/generate
{
    "text": "–¢–µ–∫—Å—Ç –¥–ª—è —á—Ç–µ–Ω–∏—è",
    "language": "ru" | "en" | "auto",
    "voice_gender": "male" | "female"
}

GET /api/tts/audio/{audio_id}
# –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞—É–¥–∏–æ —Ñ–∞–π–ª
```

#### 3.3 Frontend Avatar (`frontend/avatar_player.html`)
- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–≤–∞—Ç–∞—Ä
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≥—É–± (lip-sync)
- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (play/pause)
- –í—ã–±–æ—Ä —è–∑—ã–∫–∞ –∏ –≥–æ–ª–æ—Å–∞

---

## üìù –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### Backend
1. ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞—É–¥–∏–æ —á–µ—Ä–µ–∑ gTTS
2. ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞ —Ç–µ–∫—Å—Ç–∞
3. ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—É–¥–∏–æ —Ñ–∞–π–ª–æ–≤
4. ‚úÖ API endpoints –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –∞—É–¥–∏–æ

### Frontend
1. ‚úÖ –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∞–≤–∞—Ç–∞—Ä–∞
2. ‚úÖ –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∞—É–¥–∏–æ
3. ‚úÖ –ê–Ω–∏–º–∞—Ü–∏—è –≥—É–± –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏
4. ‚úÖ –í—ã–±–æ—Ä —è–∑—ã–∫–∞ (ru/en)
5. ‚úÖ –í—ã–±–æ—Ä –ø–æ–ª–∞ –≥–æ–ª–æ—Å–∞ (–≥–¥–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
1. ‚úÖ –ö–Ω–æ–ø–∫–∞ "–ß–∏—Ç–∞—Ç—å –≤—Å–ª—É—Ö" –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö –Ω–æ–≤–æ—Å—Ç–µ–π
2. ‚úÖ –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –∞–≤–∞—Ç–∞—Ä–æ–º
3. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞ —Å—Ç–∞—Ç—å–∏

---

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### MVP (–ù–µ–¥–µ–ª—è 1)
- [ ] Backend TTS service —Å gTTS
- [ ] API endpoints
- [ ] –ü—Ä–æ—Å—Ç–æ–π –∞–≤–∞—Ç–∞—Ä (CSS/JS)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –Ω–æ–≤–æ—Å—Ç–Ω–æ–π –ª–µ–Ω—Ç–æ–π

### –§–∞–∑–∞ 2 (–ù–µ–¥–µ–ª—è 2)
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—É–¥–∏–æ
- [ ] pyttsx3 –¥–ª—è –æ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º–∞
- [ ] –£–ª—É—á—à–µ–Ω–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –∞–≤–∞—Ç–∞—Ä–∞
- [ ] –í—ã–±–æ—Ä –ø–æ–ª–∞ –≥–æ–ª–æ—Å–∞

### –§–∞–∑–∞ 3 (–ë—É–¥—É—â–µ–µ)
- [ ] Azure/Google Cloud TTS (–ø—Ä–µ–º–∏—É–º)
- [ ] –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∞–≤–∞—Ç–∞—Ä–∞
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

---

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### config.py
```python
# TTS Configuration
TTS_AUDIO_DIR = DATA_DIR / "audio" / "tts"
TTS_CACHE_ENABLED = True
TTS_MAX_TEXT_LENGTH = 5000
```

### .env (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```env
TTS_PROVIDER=gtts
TTS_CACHE_TTL_DAYS=30
```

---

## üìä –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### gTTS
- ‚ùå –ù–µ—Ç –ø—Ä—è–º–æ–≥–æ –≤—ã–±–æ—Ä–∞ –ø–æ–ª–∞ –≥–æ–ª–æ—Å–∞
- ‚úÖ –•–æ—Ä–æ—à–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ
- ‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç

### pyttsx3 (–æ—Ñ–ª–∞–π–Ω)
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –æ—Ñ–ª–∞–π–Ω
- ‚úÖ –ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –≥–æ–ª–æ—Å –ø–æ –ø–æ–ª—É (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–∏—Å—Ç–µ–º—ã)
- ‚ö†Ô∏è –ö–∞—á–µ—Å—Ç–≤–æ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≥–æ–ª–æ—Å–æ–≤

---

## üé® –î–∏–∑–∞–π–Ω –∞–≤–∞—Ç–∞—Ä–∞

### –ü—Ä–æ—Å—Ç–æ–π –≤–∞—Ä–∏–∞–Ω—Ç (MVP)
- –ö—Ä—É–≥–ª–æ–µ –ª–∏—Ü–æ
- –î–≤–∞ –≥–ª–∞–∑–∞ (–º–∏–≥–∞–Ω–∏–µ)
- –†–æ—Ç (–∞–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏ —Ä–µ—á–∏)
- –¢–µ–º–Ω–∞—è —Ç–µ–º–∞

### –ê–Ω–∏–º–∞—Ü–∏–∏
- Idle: –ø–ª–∞–≤–Ω–æ–µ –¥—ã—Ö–∞–Ω–∏–µ
- Speaking: —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≥—É–± —Å –∞—É–¥–∏–æ
- Listening: —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ –¥–µ–π—Å—Ç–≤–∏—è

---

## üì¶ –•—Ä–∞–Ω–∏–ª–∏—â–µ

```
data/
‚îî‚îÄ‚îÄ audio/
    ‚îî‚îÄ‚îÄ tts/
        ‚îú‚îÄ‚îÄ {audio_id}.mp3
        ‚îî‚îÄ‚îÄ cache/
            ‚îî‚îÄ‚îÄ {hash}.mp3
```

–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ —Ö—ç—à—É: `hash(text + language + voice_gender)`

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ß–µ–∫–ª–∏—Å—Ç
- [ ] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞—É–¥–∏–æ –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
- [ ] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞—É–¥–∏–æ –¥–ª—è –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
- [ ] –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ê–≤–∞—Ç–∞—Ä –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- [ ] –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≥—É–± —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –Ω–æ–≤–æ—Å—Ç–Ω–æ–π –ª–µ–Ω—Ç–æ–π

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- –ü–æ–ª–Ω—ã–π –ø–ª–∞–Ω TTS: `AVATAR_TTS_PLAN.md`
- –ü–ª–∞–Ω Telegram: `TELEGRAM_INTEGRATION_PLAN.md`
- –û–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–π –ø–ª–∞–Ω: `COMPLETE_INTEGRATION_PLAN.md`

---

## ‚è±Ô∏è –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏

- **MVP**: 5-7 –¥–Ω–µ–π
- **–§–∞–∑–∞ 2**: 3-5 –¥–Ω–µ–π
- **–§–∞–∑–∞ 3**: –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ü–ª–∞–Ω —Å–æ–∑–¥–∞–Ω
2. ‚è≠Ô∏è –ù–∞—á–∞—Ç—å —Å Backend TTS Service
3. ‚è≠Ô∏è –î–æ–±–∞–≤–∏—Ç—å API endpoints
4. ‚è≠Ô∏è –°–æ–∑–¥–∞—Ç—å frontend –∞–≤–∞—Ç–∞—Ä
5. ‚è≠Ô∏è –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å –Ω–æ–≤–æ—Å—Ç–Ω–æ–π –ª–µ–Ω—Ç–æ–π
6. ‚è≠Ô∏è –î–æ–±–∞–≤–∏—Ç—å Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é (—Å–º. `TELEGRAM_INTEGRATION_PLAN.md`)

---

## üì± Telegram –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

–¢–∞–∫–∂–µ –¥–æ—Å—Ç—É–ø–µ–Ω –ø–ª–∞–Ω –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–æ—Å—Ç–æ–≤ –≤ Telegram –∫–∞–Ω–∞–ª:
- ‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π Telegram Bot API
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞
- ‚úÖ –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π
- ‚úÖ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å—Ç–æ–≤

–°–º. `TELEGRAM_INTEGRATION_PLAN.md` –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.
